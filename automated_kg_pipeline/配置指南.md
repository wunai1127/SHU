# âœ… é…ç½®æŒ‡å— - ä»…éœ€3æ­¥

## å½“å‰çŠ¶æ€

âœ… **å·²å®Œæˆ**ï¼š
- ç›®å½•ç»“æ„å·²åˆ›å»º
- é…ç½®æ–‡ä»¶å·²ç”Ÿæˆï¼š`config.yaml`
- Schemaå·²å°±ç»ªï¼š`schemas/chinese_medical_kg_schema.json`
- åŒä¹‰è¯åº“å·²åˆ›å»ºï¼š`schemas/medical_synonyms.json`

âš ï¸ **éœ€è¦æ‚¨å¡«å†™**ï¼š
1. LLM APIå¯†é’¥
2. Neo4jå¯†ç 
3. 20000+ç¯‡æ–‡ç« æ•°æ®è·¯å¾„

---

## æ­¥éª¤1: å¡«å†™APIå¯†é’¥å’Œå¯†ç ï¼ˆ2åˆ†é’Ÿï¼‰

ç¼–è¾‘ `config.yaml` æ–‡ä»¶ï¼Œæ›¿æ¢ä»¥ä¸‹ä¸‰å¤„ï¼š

```yaml
# ç¬¬1å¤„ï¼šDeepSeek APIå¯†é’¥ï¼ˆæ¨èï¼‰
llm:
  provider: "deepseek"
  deepseek:
    api_key: "YOUR_DEEPSEEK_API_KEY"  # â† æ›¿æ¢è¿™é‡Œ

# å¦‚ä½•è·å–DeepSeek APIå¯†é’¥ï¼š
# 1. è®¿é—® https://platform.deepseek.com/
# 2. æ³¨å†Œ/ç™»å½•è´¦å·
# 3. è¿›å…¥"APIå¯†é’¥"é¡µé¢ï¼Œç‚¹å‡»"åˆ›å»ºæ–°å¯†é’¥"
# 4. å……å€¼50-100å…ƒï¼ˆè¶³å¤Ÿå¤„ç†20000ç¯‡æ–‡ç« ï¼‰
```

```yaml
# ç¬¬2å¤„ï¼šNeo4jå¯†ç 
neo4j:
  uri: "bolt://localhost:7687"
  username: "neo4j"
  password: "YOUR_NEO4J_PASSWORD"  # â† æ›¿æ¢è¿™é‡Œ

# å¦‚ä½•è®¾ç½®Neo4jå¯†ç ï¼š
# å¦‚æœæ˜¯æœ¬åœ°Neo4jé¦–æ¬¡å¯åŠ¨ï¼š
# 1. è®¿é—® http://localhost:7474
# 2. é»˜è®¤ç”¨æˆ·å/å¯†ç éƒ½æ˜¯ neo4j/neo4j
# 3. é¦–æ¬¡ç™»å½•ä¼šè¦æ±‚ä¿®æ”¹å¯†ç ï¼Œè®¾ç½®åå¡«å†™åˆ°è¿™é‡Œ
```

```yaml
# ç¬¬3å¤„ï¼šæ•°æ®è·¯å¾„ï¼ˆå¦‚æœæ‚¨çš„æ•°æ®å­—æ®µåä¸åŒï¼Œä¹Ÿéœ€è¦ä¿®æ”¹ï¼‰
data:
  input_directory: "/home/user/SHU/data/medical_abstracts"  # â† å¦‚æœè·¯å¾„ä¸åŒï¼Œä¿®æ”¹è¿™é‡Œ
  field_mapping:
    text_field: "abstract"  # â† å¦‚æœæ‚¨çš„JSONä¸­æ–‡æœ¬å­—æ®µä¸å«"abstract"ï¼Œä¿®æ”¹è¿™é‡Œ
    id_field: "pmid"        # â† å¦‚æœæ‚¨çš„JSONä¸­IDå­—æ®µä¸å«"pmid"ï¼Œä¿®æ”¹è¿™é‡Œ
```

---

## æ­¥éª¤2: ä¸Šä¼ æ‚¨çš„20000+ç¯‡æ–‡ç« æ•°æ®ï¼ˆ5åˆ†é’Ÿï¼‰

å°†æ‚¨çš„åŒ»å­¦æ–‡ç« JSONæ–‡ä»¶æ”¾åˆ°æ•°æ®ç›®å½•ï¼š

```bash
# æ–¹å¼1: å¦‚æœæ–‡ä»¶åœ¨æœ¬åœ°
cp /path/to/your/articles/*.json /home/user/SHU/data/medical_abstracts/

# æ–¹å¼2: å¦‚æœæ˜¯å•ä¸ªå¤§æ–‡ä»¶
cp /path/to/your/articles.json /home/user/SHU/data/medical_abstracts/

# æ–¹å¼3: å¦‚æœæ˜¯å‹ç¼©æ–‡ä»¶
unzip articles.zip -d /home/user/SHU/data/medical_abstracts/
# æˆ–
tar -xzf articles.tar.gz -C /home/user/SHU/data/medical_abstracts/
```

### æ•°æ®æ ¼å¼è¦æ±‚

æ‚¨çš„JSONæ–‡ä»¶åº”è¯¥æ˜¯ä»¥ä¸‹æ ¼å¼ä¹‹ä¸€ï¼š

**æ ¼å¼1: JSONæ•°ç»„** (`articles.json`)
```json
[
  {
    "pmid": "12345678",
    "title": "Heart transplantation outcomes...",
    "abstract": "Background: This study evaluated...",
    "authors": ["Smith J", "Wang L"],
    "journal": "Circulation",
    "year": 2023
  },
  {
    "pmid": "12345679",
    "abstract": "..."
  }
]
```

**æ ¼å¼2: JSONL** (`articles.jsonl` - æ¨èå¤§æ–‡ä»¶ä½¿ç”¨)
```jsonl
{"pmid": "12345678", "abstract": "Background: This study...", "title": "..."}
{"pmid": "12345679", "abstract": "Methods: We analyzed...", "title": "..."}
```

å¦‚æœæ˜¯JSONLæ ¼å¼ï¼Œä¿®æ”¹`config.yaml`ä¸­çš„ï¼š
```yaml
data:
  filename_pattern: "*.jsonl"  # æ”¹ä¸º *.jsonl
  expected_format: "jsonl"     # æ”¹ä¸º jsonl
```

---

## æ­¥éª¤3: éªŒè¯é…ç½®ï¼ˆ1åˆ†é’Ÿï¼‰

è¿è¡Œç³»ç»Ÿæ£€æŸ¥è„šæœ¬ï¼š

```bash
cd /home/user/SHU/automated_kg_pipeline
python test_system_ready.py --config config.yaml
```

**é¢„æœŸè¾“å‡ºï¼ˆå…¨éƒ¨æ‰“å‹¾è¡¨ç¤ºé…ç½®æ­£ç¡®ï¼‰**ï¼š
```
============================================================
å¿ƒè„ç§»æ¤KGç³»ç»Ÿå°±ç»ªæ€§æ£€æŸ¥
============================================================

æ£€æŸ¥ Pythonç‰ˆæœ¬... âœ“
æ£€æŸ¥ é…ç½®æ–‡ä»¶... âœ“
æ£€æŸ¥ ä¾èµ–åŒ…... âœ“
æ£€æŸ¥ æ•°æ®æ–‡ä»¶... (20000 æ–‡ä»¶) âœ“
æ£€æŸ¥ Schemaæ–‡ä»¶... âœ“
æ£€æŸ¥ Neo4jè¿æ¥... âœ“
æ£€æŸ¥ LLMé…ç½®... âœ“
æ£€æŸ¥ GPUå¯ç”¨æ€§... (2 GPU) âœ“

============================================================
âœ… æ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼ç³»ç»Ÿå·²å°±ç»ªã€‚

è¿è¡Œä»¥ä¸‹å‘½ä»¤å¼€å§‹æ„å»ºçŸ¥è¯†å›¾è°±:
  python auto_kg_builder.py --config config.yaml
============================================================
```

---

## â“ å¦‚æœé‡åˆ°é—®é¢˜

### é—®é¢˜1: "é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯"
**åŸå› **ï¼šYAMLç¼©è¿›é”™è¯¯
**è§£å†³**ï¼šæ£€æŸ¥config.yamlä¸­çš„ç¼©è¿›æ˜¯å¦æ­£ç¡®ï¼ˆå¿…é¡»ç”¨ç©ºæ ¼ï¼Œä¸èƒ½ç”¨Tabï¼‰

### é—®é¢˜2: "æ•°æ®ç›®å½•ä¸ºç©º"
**åŸå› **ï¼šæ•°æ®æ–‡ä»¶æœªä¸Šä¼ æˆ–è·¯å¾„é”™è¯¯
**è§£å†³**ï¼š
```bash
# æ£€æŸ¥æ•°æ®æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -lh /home/user/SHU/data/medical_abstracts/

# å¦‚æœä¸ºç©ºï¼Œä¸Šä¼ æ‚¨çš„æ•°æ®æ–‡ä»¶
```

### é—®é¢˜3: "Neo4jè¿æ¥å¤±è´¥"
**åŸå› **ï¼šNeo4jæœªå¯åŠ¨æˆ–å¯†ç é”™è¯¯
**è§£å†³**ï¼š
```bash
# æ£€æŸ¥Neo4jæ˜¯å¦è¿è¡Œ
sudo systemctl status neo4j

# å¦‚æœæœªè¿è¡Œï¼Œå¯åŠ¨Neo4j
sudo systemctl start neo4j

# éªŒè¯å¯†ç æ˜¯å¦æ­£ç¡®ï¼ˆè®¿é—®æµè§ˆå™¨ï¼‰
# http://localhost:7474
```

### é—®é¢˜4: "LLM APIå¯†é’¥æ— æ•ˆ"
**åŸå› **ï¼šAPIå¯†é’¥æœªå¡«å†™æˆ–æ ¼å¼é”™è¯¯
**è§£å†³**ï¼š
1. æ£€æŸ¥config.yamlä¸­çš„api_keyæ˜¯å¦æ­£ç¡®
2. ç¡®ä¿å¯†é’¥ä»¥`sk-`å¼€å¤´ï¼ˆDeepSeekï¼‰
3. æµ‹è¯•APIæ˜¯å¦å¯ç”¨ï¼š
```bash
curl https://api.deepseek.com/v1/models \
  -H "Authorization: Bearer YOUR_API_KEY"
```

### é—®é¢˜5: "ç¼ºå°‘ä¾èµ–åŒ…"
**è§£å†³**ï¼š
```bash
pip install -r requirements.txt
```

---

## ğŸ“ é…ç½®ç¤ºä¾‹ï¼ˆå®Œæ•´ï¼‰

å¦‚æœæ‚¨ä¸ç¡®å®šå¦‚ä½•å¡«å†™ï¼Œå‚è€ƒä»¥ä¸‹å®Œæ•´ç¤ºä¾‹ï¼š

```yaml
llm:
  provider: "deepseek"
  deepseek:
    api_key: "sk-1234567890abcdef"  # æ‚¨çš„çœŸå®DeepSeekå¯†é’¥

data:
  input_directory: "/home/user/SHU/data/medical_abstracts"
  filename_pattern: "*.json"
  expected_format: "json"
  field_mapping:
    text_field: "abstract"  # æ‚¨çš„JSONä¸­å¯èƒ½æ˜¯ "text" æˆ– "content"
    id_field: "pmid"        # æ‚¨çš„JSONä¸­å¯èƒ½æ˜¯ "id" æˆ– "article_id"

neo4j:
  uri: "bolt://localhost:7687"
  username: "neo4j"
  password: "MyNeo4jPassword123"  # æ‚¨çš„çœŸå®Neo4jå¯†ç 
  database: "heart_transplant_kg"
```

---

## âœ… é…ç½®å®Œæˆå

è¿è¡Œä»¥ä¸‹å‘½ä»¤å¼€å§‹æ„å»ºçŸ¥è¯†å›¾è°±ï¼š

```bash
# å°è§„æ¨¡æµ‹è¯•ï¼ˆ10ç¯‡æ–‡ç« ï¼‰
python auto_kg_builder.py --config config.yaml --test-mode --max-articles 10

# å¦‚æœæµ‹è¯•æˆåŠŸï¼Œè¿è¡Œå…¨é‡
python auto_kg_builder.py --config config.yaml
```

**é¢„è®¡æ—¶é—´**ï¼š
- DeepSeek API: 30-60åˆ†é’Ÿï¼ˆæˆæœ¬~50å…ƒï¼‰
- æœ¬åœ°4 GPU: 14å°æ—¶ï¼ˆå…è´¹ï¼‰

---

## ğŸ¯ ä¸‹ä¸€æ­¥

æ„å»ºå®Œæˆåï¼š
1. åœ¨Neo4j Browserä¸­éªŒè¯æ•°æ®ï¼šhttp://localhost:7474
2. æŸ¥çœ‹è´¨é‡æŠ¥å‘Šï¼š`output/final/build_report.json`
3. å¼€å§‹é›†æˆMulti-Agentç³»ç»Ÿ
